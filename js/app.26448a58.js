(function(){"use strict";var t={1776:function(t,e,n){e.Z=n.p+"assets/models/exhition04.7ff54fd.glb"},2113:function(t,e,n){var i=n(9242),o=n(3396);function s(t,e,n,i,s,r){const a=(0,o.up)("ModelView");return(0,o.wg)(),(0,o.j4)(a)}var r=n(7139);const a={class:"three-container"},h={class:"three-canvas",ref:"mountPoint"},l=["onClick"],c={class:"three-button_hint"};function u(t,e,n,s,u,d){return(0,o.wg)(),(0,o.iD)("div",null,[(0,o._)("div",a,[(0,o._)("div",h,null,512),((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(u.buttons,(t=>((0,o.wg)(),(0,o.iD)("div",{class:(0,r.C_)(["three-button",{"three-button_show":t.show}]),key:t.i,style:(0,r.j5)({left:t.x+"px",top:t.y+"px"}),onClick:(0,i.iM)((e=>d.buttonClick(t)),["prevent"])},[(0,o._)("span",c,(0,r.zw)(t.hint),1)],14,l)))),128))])])}n(7658);var d=n(1114),m=n(9469),p=n(4543);function f(t,e,n,i=1/60){t.sub(n);let o=t.length();o>e&&(o+=(e-o)*.1**(60*i),t.setLength(o)),t.add(n)}const w=[0,100,200,300,400,500,550],g={Button001:1,Button0021:2,Button0022:2,Button003:3,Button004:4,Button005:5},v=["Expand","Wall","Poster","Table & TV","Close"];var b={data(){return{animationFrameID:null,collapse:0,buttons:[],time:0,fps:60,currentStateId:0,showStateId:null}},mounted(){this.initThreeScene(),this.loadGLTF(),this.onResize(),this.animate(),addEventListener("resize",this.onResize)},beforeUnmount(){cancelAnimationFrame(this.animationFrameID),removeEventListener("resize",this.onResize)},methods:{initThreeScene(){this.lastUpdate=Date.now(),this.scene=new d.xsS,this.origin=new d.Pa4(0,0,0);const t=500,e=500;this.ground_y=0,this.renderer=new d.CP7({antialias:!0}),this.renderer.setClearColor(16777215,0),this.renderer.setSize(t,e),this.$refs.mountPoint.appendChild(this.renderer.domElement),this.camera=new d.cPb(45,t/e,1,1e4),this.camera.position.z=10,this.controls=new p.z(this.camera,this.renderer.domElement),this.controls.update(),this.controls.dampingFactor=.2,this.controls.enableDamping=!0;const n=new d.Mig(16777215);this.scene.add(n);const i=new d.cek(16777215,1);i.position.set(2,2,2),this.scene.add(i)},resize(t,e){this.camera.aspect=t/e,this.camera.updateProjectionMatrix(),this.renderer.setSize(t,e)},onResize(){this.resize(window.innerWidth,window.innerHeight)},loadGLTF(){const t=new m.E;this.raw_mesh=[],t.load(n(1776).Z,(t=>{let e=t.scene;this.scene.add(e),console.log(t),this.mixer=new d.Xcj(e),this.action=this.mixer.clipAction(t.animations[0]),this.action.play();let n=[e],i=[];while(n.length>0){let t=n.pop();t.frustumCulled=!1,t.children&&n.push(...t.children),t.morphTargetInfluences&&t.morphTargetInfluences.length>0&&this.raw_mesh.push(t),"Plane"==t.name&&t.parent.remove(t),t.name in g&&(console.log(t),i.push({i:g[t.name],name:t.name,x:0,y:0,obj:t,hint:v[g[t.name]-1],show:!1})),t.animations.length>0&&print(t)}this.buttons=i}))},animate(){this.animationFrameID=requestAnimationFrame(this.animate);let t=Date.now(),e=(t-this.lastUpdate)/1e3;this.lastUpdate=t;let n=60,i=w[this.currentStateId]/n,o=w[w.length-1]/n;if(this.mixer){let t=this.time<=i;this.time>o&&(t=!0,this.time=this.time-o),this.time+=e,t&&this.time>i?(this.time=i,this.showStateId=(this.currentStateId+1)%(w.length-1)):this.showStateId=null,this.action.time=this.time,this.mixer.update(0),console.log(i,this.time)}f(this.controls.target,1,this.origin,e),f(this.camera.position,10,this.origin,e),this.camera.position.y<this.ground_y&&(this.camera.position.y=this.ground_y),this.controls.update(e);for(let a of this.raw_mesh)a.morphTargetInfluences[0]=this.collapse;if(this.renderer.render(this.scene,this.camera),this.buttons){var s=new d.Pa4;this.renderer.getSize(s);let t=new d.Pa4(0,0,0),n=0,i=null,o=null;for(let e of this.buttons){var r=new d.Pa4;if(r.setFromMatrixPosition(e.obj.matrixWorld),r.project(this.camera),e.x=(r.x+1)*s.x/2,e.y=(1-r.y)*s.y/2,e.show=!1,e.i==this.showStateId){t.add(e.obj.position),n+=1;let s=new d.Pa4,r=s.subVectors(this.camera.position,e.obj.position).lengthSq();(null==o||r<o)&&(i=e,o=r)}}null!==i&&(i.show=!0),n>0&&(t.divideScalar(n),this.origin.add(t.sub(this.origin).multiplyScalar(.05**(60*e))))}},buttonClick(t){this.currentStateId=t.i%(w.length-2)}}},x=n(89);const y=(0,x.Z)(b,[["render",u],["__scopeId","data-v-01ec42ab"]]);var S=y,_={name:"App",components:{ModelView:S}};const j=(0,x.Z)(_,[["render",s]]);var I=j;(0,i.ri)(I).mount("#app")}},e={};function n(i){var o=e[i];if(void 0!==o)return o.exports;var s=e[i]={exports:{}};return t[i].call(s.exports,s,s.exports,n),s.exports}n.m=t,function(){var t=[];n.O=function(e,i,o,s){if(!i){var r=1/0;for(c=0;c<t.length;c++){i=t[c][0],o=t[c][1],s=t[c][2];for(var a=!0,h=0;h<i.length;h++)(!1&s||r>=s)&&Object.keys(n.O).every((function(t){return n.O[t](i[h])}))?i.splice(h--,1):(a=!1,s<r&&(r=s));if(a){t.splice(c--,1);var l=o();void 0!==l&&(e=l)}}return e}s=s||0;for(var c=t.length;c>0&&t[c-1][2]>s;c--)t[c]=t[c-1];t[c]=[i,o,s]}}(),function(){n.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return n.d(e,{a:e}),e}}(),function(){n.d=function(t,e){for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){n.p=""}(),function(){var t={143:0};n.O.j=function(e){return 0===t[e]};var e=function(e,i){var o,s,r=i[0],a=i[1],h=i[2],l=0;if(r.some((function(e){return 0!==t[e]}))){for(o in a)n.o(a,o)&&(n.m[o]=a[o]);if(h)var c=h(n)}for(e&&e(i);l<r.length;l++)s=r[l],n.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return n.O(c)},i=self["webpackChunkexhibition"]=self["webpackChunkexhibition"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=n.O(void 0,[998],(function(){return n(2113)}));i=n.O(i)})();
//# sourceMappingURL=app.26448a58.js.map